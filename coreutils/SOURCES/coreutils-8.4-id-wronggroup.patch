diff -urNp coreutils-8.4-orig/src/group-list.c coreutils-8.4/src/group-list.c
--- coreutils-8.4-orig/src/group-list.c	2010-01-03 18:06:20.000000000 +0100
+++ coreutils-8.4/src/group-list.c	2013-07-31 16:23:20.716228021 +0200
@@ -38,11 +38,14 @@ print_group_list (const char *username,
                   bool use_names)
 {
   bool ok = true;
-  struct passwd *pwd;
+  struct passwd *pwd = NULL;
 
-  pwd = getpwuid (ruid);
-  if (pwd == NULL)
-    ok = false;
+  if (username)
+    {
+      pwd = getpwuid (ruid);
+      if (pwd == NULL)
+      ok = false;
+    }
 
   if (!print_group (rgid, use_names))
     ok = false;
@@ -58,9 +61,8 @@ print_group_list (const char *username,
     gid_t *groups;
     int i;
 
-    int n_groups = xgetgroups (username, (pwd ? pwd->pw_gid : (gid_t) -1),
-                               &groups);
-    if (n_groups < 0)
+  int n_groups = xgetgroups (username, (pwd ? pwd->pw_gid : egid), &groups);
+  if (n_groups < 0)
       {
         if (username)
           {
diff -urNp coreutils-8.4-orig/tests/Makefile.am coreutils-8.4/tests/Makefile.am
--- coreutils-8.4-orig/tests/Makefile.am	2013-07-31 16:03:37.543477234 +0200
+++ coreutils-8.4/tests/Makefile.am	2013-07-31 16:26:26.563249959 +0200
@@ -185,6 +185,7 @@ TESTS =						\
   misc/head-pos					\
   misc/id-context				\
   misc/id-groups				\
+  misc/id-setgid                                \
   misc/md5sum					\
   misc/md5sum-newline				\
   misc/md5sum-parallel				\
diff -urNp coreutils-8.4-orig/tests/misc/id-setgid coreutils-8.4/tests/misc/id-setgid
--- coreutils-8.4-orig/tests/misc/id-setgid	1970-01-01 01:00:00.000000000 +0100
+++ coreutils-8.4/tests/misc/id-setgid	2013-07-31 16:25:49.342877055 +0200
@@ -0,0 +1,38 @@
+#!/bin/sh
+# Verify that id -G prints the right group when run set-GID.
+
+# Copyright (C) 2012 Free Software Foundation, Inc.
+
+# This program is free software: you can redistribute it and/or modify
+# it under the terms of the GNU General Public License as published by
+# the Free Software Foundation, either version 3 of the License, or
+# (at your option) any later version.
+
+# This program is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY; without even the implied warranty of
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+# GNU General Public License for more details.
+
+# You should have received a copy of the GNU General Public License
+# along with this program.  If not, see <http://www.gnu.org/licenses/>.
+
+if test "$VERBOSE" = yes; then
+  set -x
+  id --version
+fi
+
+. $srcdir/test-lib.sh
+require_root_
+
+g=$(id -u $NON_ROOT_USERNAME) || framework_failure_
+
+# Construct a different group number.
+gp1=$(expr $g + 1)
+
+echo $gp1 > exp || framework_failure_
+
+setuidgid -g $gp1 $NON_ROOT_USERNAME env PATH="$PATH" id -G > out || fail=1
+compare exp out || fail=1
+# With coreutils-8.16 and earlier, id -G would print both: $gp1 $g
+
+Exit $fail
